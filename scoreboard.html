<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>&#1054;&#1083;&#1080;&#1084;&#1087;&#1080;&#1072;&#1076;&#1072; &#1087;&#1086; &#1075;&#1088;&#1072;&#1078;&#1076;&#1072;&#1085;&#1089;&#1082;&#1086;&#1084;&#1091; &#1087;&#1088;&#1072;&#1074;&#1091;</title>
  <style>
    :root{
      --bg:#070b1f;
      --bg2:#0b1540;
      --card:#0e1a4a;
      --muted:#8ea2ff;
      --text:#eaf2ff;
      --accent:#00d4ff;
      --radius:18px;
      --shadow:0 14px 40px rgba(0,0,0,.45);
      --glow:0 0 0px rgba(0,212,255,0),0 0 16px rgba(0,212,255,.25),0 0 32px rgba(0,212,255,.15);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 900px at 20% -10%, var(--bg2) 0%, transparent 40%),
        radial-gradient(1200px 900px at 120% 20%, #0a1240 0%, transparent 45%),
        linear-gradient(180deg, #060a1a 0%, var(--bg) 100%);
      color:var(--text);
      min-height:100dvh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:48px 18px;
    }
    .wrap{
      width:100%;
      max-width:1100px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:32px;
    }
    .main-title{
      text-align:center;
      font-size:36px;
      font-weight:800;
      color:var(--text);
      margin:0;
      letter-spacing:1px;
      text-shadow:0 0 12px rgba(0,212,255,.3);
    }
    .grid{
      display:grid;
      gap:24px;
      width:100%;
      grid-template-columns:repeat(2, minmax(0, 1fr));
      justify-items:stretch;
    }
    @media(max-width:900px){
      .grid{grid-template-columns:1fr}
    }
    .team-card{
      background:linear-gradient(
        to top right,
        #975af4,
        #2f7cf8 40%,
        #78aafa 65%,
        #934cff 100%
      );
      padding:4px;
      border-radius:32px;
      display:flex;
      flex-direction:column;
      width:100%;
      min-height:240px;
      box-shadow:var(--shadow);
    }
    .title-card{
      display:flex;
      align-items:center;
      padding:16px 18px;
      justify-content:center;
      color:#fff;
    }
    .title-card input{
      font-size:18px;
      font-weight:600;
      background:transparent;
      border:none;
      color:inherit;
      width:100%;
      font-style:italic;
      text-shadow:2px 2px 6px #2975ee;
      text-align:center;
    }
    .title-card input::placeholder{
      color:rgba(255,255,255,.7);
    }
    .title-card input:focus{
      outline:none;
    }
    .card-content{
      width:100%;
      height:100%;
      background:linear-gradient(140deg, rgba(16,26,52,.95) 0%, rgba(10,19,44,.92) 35%, rgba(24,46,90,.9) 100%);
      border-radius:30px;
      color:#9fa7c9;
      font-size:12px;
      padding:22px 24px 26px;
      display:flex;
      flex-direction:column;
      gap:18px;
      flex:1;
      box-shadow:var(--shadow);
    }
    .name-input{
      width:100%;
    }
    .name-input:focus{
      outline:none;
    }
    .score-label{
      font-size:13px;
      color:#b4c7ff;
      text-transform:uppercase;
      letter-spacing:.42px;
    }
    .score-panel{
      position:relative;
      border-radius:20px;
      padding:22px 18px;
      background:radial-gradient(circle at 50% 30%, rgba(48,123,248,.35) 0%, rgba(17,37,86,.25) 45%, rgba(7,15,40,.9) 100%);
      box-shadow:inset 0 18px 28px rgba(0,0,0,.45), inset 0 -6px 18px rgba(14,36,90,.55);
      border:1px solid rgba(102,150,255,.18);
      transition:box-shadow .25s ease, border-color .25s ease;
    }
    .score-panel::after{
      content:"";
      position:absolute;
      inset:4px;
      border-radius:16px;
      background:linear-gradient(145deg, rgba(6,18,47,.85) 0%, rgba(10,24,62,.75) 40%, rgba(16,34,78,.6) 100%);
      z-index:0;
      pointer-events:none;
      opacity:.7;
    }
    .score-panel.filled{
      box-shadow:inset 0 18px 28px rgba(0,0,0,.45), inset 0 -6px 18px rgba(14,36,90,.65), 0 0 24px rgba(80,158,255,.28);
      border-color:rgba(102,150,255,.38);
    }
    .score-input{
      position:relative;
      z-index:1;
      background:transparent;
      color:#f5fbff;
      border:none;
      width:100%;
      font-size:56px;
      font-weight:900;
      text-align:center;
      letter-spacing:2px;
      text-shadow:none;
      transition:text-shadow .25s ease;
    }
    .score-panel.filled .score-input{
      text-shadow:0 0 8px rgba(168,211,255,.75), 0 0 22px rgba(35,143,255,.32);
    }
    .score-panel.filled .score-input:focus{
      outline:none;
      text-shadow:0 0 12px rgba(195,229,255,.85), 0 0 32px rgba(64,159,255,.45);
    }
    .score-input:focus{
      outline:none;
    }
    /* hide number input arrows */
    .score-input::-webkit-outer-spin-button,
    .score-input::-webkit-inner-spin-button{
      -webkit-appearance:none;
      margin:0;
    }
    .score-input[type=number]{
      appearance:textfield;
      -moz-appearance:textfield;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="main-title">&#1054;&#1083;&#1080;&#1084;&#1087;&#1080;&#1072;&#1076;&#1072; &#1087;&#1086; &#1075;&#1088;&#1072;&#1078;&#1076;&#1072;&#1085;&#1089;&#1082;&#1086;&#1084;&#1091; &#1087;&#1088;&#1072;&#1074;&#1091;</h1>
    <main class="grid" id="teams"></main>
  </div>

  <template id="teamTemplate">
    <section class="team-card" data-team>
      <div class="title-card">
        <input class="name-input" type="text" placeholder="&#1053;&#1072;&#1079;&#1074;&#1072;&#1085;&#1080;&#1077; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1099;" />
      </div>
      <div class="card-content">
        <div class="score-label">&#1057;&#1095;&#1105;&#1090;</div>
          <div class="score-panel">
            <input class="score-input" type="number" inputmode="numeric" value="" data-input-score />
          </div>
        </div>
      </section>
    </template>

  <script>
    const defaultState = {
      teams: [
        { name: '', score: '' },
        { name: '', score: '' },
        { name: '', score: '' },
        { name: '', score: '' },
      ],
    };

    const STORAGE_KEY = 'scoreboard.v13.fullwidth';
    const deepClone = (o) => JSON.parse(JSON.stringify(o));
    const save = (s) => localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
    const load = () => {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : deepClone(defaultState);
      } catch {
        return deepClone(defaultState);
      }
    };
    let state = load();

    const teamsEl = document.getElementById('teams');
    const tmpl = document.getElementById('teamTemplate');

    const isFilled = (value) => {
      if (value === null || value === undefined) return false;
      return String(value).trim() !== '';
    };

    function toggleScoreHighlight(panel, input){
      panel.classList.toggle('filled', isFilled(input.value));
    }

    function render(){
      teamsEl.innerHTML = '';
      state.teams.forEach((t, idx) => {
        const node = tmpl.content.firstElementChild.cloneNode(true);
        const nameInput = node.querySelector('.name-input');
        const scoreInput = node.querySelector('[data-input-score]');
        const scorePanel = node.querySelector('.score-panel');

        nameInput.value = t.name;
        const storedScore = isFilled(t.score) ? String(t.score) : '';
        scoreInput.value = storedScore;
        toggleScoreHighlight(scorePanel, scoreInput);

        nameInput.addEventListener('input', (e) => {
          state.teams[idx].name = e.target.value;
          save(state);
        });
        scoreInput.addEventListener('input', (e) => {
          const value = e.target.value.trim();
          if (value === '') {
            state.teams[idx].score = '';
          } else {
            state.teams[idx].score = Number(value);
          }
          toggleScoreHighlight(scorePanel, scoreInput);
          save(state);
        });

        teamsEl.appendChild(node);
      });
    }

    render();
  </script>
</body>
</html>
